function convertCanvas(strType){if("PNG"==strType)var oImg=Canvas2Image.saveAsPNG(oCanvas,!0);if("BMP"==strType)var oImg=Canvas2Image.saveAsBMP(oCanvas,!0);if("JPEG"==strType)var oImg=Canvas2Image.saveAsJPEG(oCanvas,!0);return oImg?(oImg.id="canvasimage",oImg.style.border=oCanvas.style.border,oCanvas.parentNode.replaceChild(oImg,oCanvas),void showDownloadText()):(alert("Sorry, this browser is not capable of saving "+strType+" files!"),!1)}function putImage(){var canvas=document.getElementById("barChart");if(canvas.getContext)var myImage=(canvas.getContext("2d"),canvas.toDataURL("image/png"));var imageElement=document.getElementById("MyPix");return imageElement.src=myImage,myImage}function getCanvasContext(){var mycanvas=document.getElementById("barChart"),canvas_context=null;return mycanvas&&mycanvas.getContext?canvas_context=mycanvas.getContext("2d"):!1}function canvasImgExperiment(){canvas_context=getCanvasContext(),canvas_context&&(canvas_context.fillStyle="#FFFFFF",canvas_context.fillRect(0,0,700,700),canvas_context.fillStyle="#C00000",canvas_context.font="40px arial",canvas_context.fillText("This canvas will be exported",100,300))}function exportCanvas(){var mycanvas=document.getElementById("barChart");if(mycanvas&&mycanvas.getContext){var img=mycanvas.toDataURL("image/png;base64;");window.open(img,"","width=700,height=700")}else alert("Can not export")}$(document).ready(function(){$(document).ajaxStart(function(){return $("#progressbar").fadeIn("fast"),setTimeout(function(){$("#progressbar").each(function(){var perc=$("#progressbar").attr("aria-valuemax"),current_perc=0,progress=setInterval(function(){current_perc>=perc?clearInterval(progress):(current_perc+=Math.floor(10*Math.random()+1),$("#progressbar").css("width",current_perc+"%").attr("aria-valuenow",current_perc))},300)})},150),!1}),$(document).ajaxStop(function(){return setTimeout(function(){setTimeout(function(){$("#progressbar").fadeOut("slow",function(){$("#progressbar").css("width","0%").attr("aria-valuenow","0")})},4500),$("#progressbar").css("width","100%").attr("aria-valuenow","100")},4500),!1}),$(document).ajaxComplete(function(){}),$("#get").click(function(e){e.preventDefault(),$.get("/get",function(data){$(".modal-body").append(data)})}),$("#mail").click(function(e){e.preventDefault(),$.get("/mail",function(data){$(".info").hide().find("ul").empty(),$(".info").find("ul").append("<li>"+data.message+"</li>"),$(".info").slideDown("fast")})}),$("#cerrar").click(function(e){e.preventDefault(),$(".modal-body").empty()}),$("#post").submit(function(e){e.preventDefault();var nombre=$(this).find("input[name=name]").val(),edad=$(this).find("input[name=age]").val();$.post("/get",{name:nombre,age:edad},function(data){console.log("Nombre: "+data.name),console.log("Edad: "+data.age)},"json")}),$("#post2").submit(function(e){e.preventDefault(),$.ajax({type:"POST",url:"/get2",data:$(this).serialize(),dataType:"",success:function(data){console.log("Datos: "+data)},error:function(){console.log("error handing here")}})}),$("#fError").submit(function(e){e.preventDefault();var formData=new FormData;formData.append("name",$("#name2").val()),$.ajax({type:"POST",url:"submit",processData:!1,contentType:!1,cache:!1,dataType:"json",data:formData,success:function(data){$(".info").hide().find("ul").empty(),data.success||($.each(data.errors,function(index,error){$(".info").find("ul").append("<li>Field: "+index+" </br> Error: "+error+"</li>")}),$(".info").slideDown("fast"))},error:function(){console.log("error handing here")}})}),$("#pdf").on("click",function(e){e.preventDefault(),exportCanvas()})}),canvasImgExperiment();