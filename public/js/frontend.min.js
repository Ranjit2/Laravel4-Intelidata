$("#nav-profile a").click(function(e){e.preventDefault(),$(this).tab("show")}),$.loadJSON=function(url,method){try{return JSON.parse($.ajax({type:method,url:url,async:!1,cache:!1,dataType:"json"}).responseText)}catch(err){console.log("Error: "+err)}},$.loadChart=function(div,url,type,mes,method){var div="undefined"!=typeof div?div:"#chartdiv",type="undefined"!=typeof type&&0!=type.length?"/"+type:"",mes="undefined"!=typeof mes&&0!=mes.length?"/"+mes:"",method="undefined"!=typeof method?method:"POST",url="undefined"!=typeof url?url+type+mes:"";try{var data=$.loadJSON(url,method);AmCharts.ready(function(){AmCharts.makeChart(div,data)})}catch(err){console.log("Error: "+err)}},$.graficoBroken=function(div,url,method){var chart,legend,selected,types=$.loadJSON(url,method);chart=new AmCharts.AmPieChart;var legend=new AmCharts.AmLegend;legend.valueText="",chart.addLegend(legend,"legenddiv"),chart.dataProvider=$.generateChartData(types,selected),chart.titleField="<numero></numero>",chart.valueField="percent",chart.outlineColor="#FFFFFF",chart.outlineAlpha=.8,chart.outlineThickness=2,chart.colorField="color",chart.pulledField="pulled",chart.balloonText="<b>$[[percent]] ([[percents]]%)</b>",chart.labelText="[[numero]]",chart.radius="30%",chart.exportConfig=exportConfig;var exportConfig={menuTop:"30px",menuBottom:"auto",menuRight:"70px",backgroundColor:"#efefef",menuItems:[{textAlign:"center",icon:"http://www.amcharts.com/lib/3/images/export.png",items:[{title:"JPG",format:"jpg"},{title:"PNG",format:"png"},{title:"SVG",format:"svg"},{title:"PDF",format:"pdf"}]}]};chart.dataProvider=$.generateChartData(types,selected),chart.titleField="type",chart.valueField="percent",chart.outlineColor="",chart.outlineAlpha=.8,chart.outlineThickness=2,chart.colorField="color",chart.pulledField="pulled",chart.balloonText="<b>$[[percent]] ([[percents]]%)</b>",chart.labelText="[[type]]",chart.radius="30%",chart.exportConfig=exportConfig,chart.depth3D=10,chart.groupedPulled=!0,chart.addListener("clickSlice",function(event){void 0!=event.dataItem.dataContext.id?selected=event.dataItem.dataContext.id:(selected=void 0,$("#legenddiv").show()),chart.dataProvider=$.generateChartData(types,selected),chart.validateData()}),chart.write(div)},$.generateChartData=function(types,selected){$("#lista").hide(),$("#lista tbody").empty(),$("#lista tfoot").empty();for(var chartData=[],total=0,porcent=0,i=0;i<types.length;i++)if(types[i].subs.length>0&&i==selected){$("#legenddiv").hide(),$("#lista").show();for(var x=0;x<types[i].subs.length;x++)chartData.push({type:types[i].subs[x].type,percent:types[i].subs[x].percent,pulled:!0}),total+=parseInt(types[i].subs[x].percent);for(var x=0;x<types[i].subs.length;x++)porcent=$.porcentaje(total,types[i].subs[x].percent,1,",","."),$("#lista tbody").append(types[i].subs[x].percent<0?'<tr class="danger"><td class="col-md-5">'+types[i].subs[x].type+'</td><td class="col-md-4">'+$.progressbar(porcent)+'</td><td class="col-md-2 text-right">- $'+-1*types[i].subs[x].percent+"</td></tr>":'<tr><td class="col-md-5">'+types[i].subs[x].type+'</td><td class="col-md-4">'+$.progressbar(porcent)+'</td><td class="col-md-2 text-right">$'+types[i].subs[x].percent+"</td></tr>");$("#lista").append('<tfoot><tr class="info" style="font-weight: bold;"><td class="col-md-5">TOTAL</td><td class="col-md-4"></td><td class="col-md-2 text-right">$'+total+"</td></tr></tfoot>")}else chartData.push({type:types[i].type,percent:types[i].percent,id:i});return chartData},$.porcentaje=function(total,number){return a=100*number,a/=total,a.toFixed(1)},$.progressbar=function(a){var b=0,c="";return a>0&&100>a?c='<div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="'+a+'" aria-valuemin="0" aria-valuemax="100" style="width: '+a+'%;">'+a+"%</div></div>":(b=-1.5*a,c='<div class="progress"><div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" aria-valuenow="'+b+'" aria-valuemin="0" aria-valuemax="100" style="width: '+b+'%;">'+a+"%</div></div>"),c},$.fn.centerToWindow=function(){var obj=$(this),obj_width=$(this).outerWidth(!0),obj_height=$(this).outerHeight(!0),window_width=window.innerWidth?window.innerWidth:$(window).width(),window_height=window.innerHeight?window.innerHeight:$(window).height();obj.css({position:"fixed",top:window_height/2-obj_height/2+"px",left:window_width/2-obj_width/2+"px"})};